"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.isDocumentElement = exports.getDocumentElement = exports.getImgMapName = exports.getNodeText = exports.isNodeEqual = exports.contains = exports.isShadowElement = exports.setElementValue = exports.getElementValue = exports.setTextAreaValue = exports.setInputValue = exports.getTextAreaValue = exports.getInputValue = exports.getChildNodesLength = exports.getChildrenLength = exports.getCommonAncestor = exports.isEditableFormElement = exports.findIframeByWindow = exports.isTopWindow = exports.isIFrameWindowInDOM = exports.remove = exports.getFocusableParent = exports.getElementDescription = exports.isTheSameNode = exports.getElementIndexInParent = exports.isOptionGroupElement = exports.isElementContainsNode = exports.isEditableElement = exports.blocksImplicitSubmission = exports.getTextareaPositionByLineAndOffset = exports.getTextareaLineNumberByPosition = exports.getTextareaIndentInLine = exports.containsElement = exports.getTabIndexAttributeIntValue = exports.getFocusableElements = exports.getParentExceptShadowRoot = exports.getTopSameDomainWindow = exports.findParent = exports.getParents = exports.closest = exports.getTagName = exports.getMapContainer = exports.getScrollbarSize = exports.isElementReadOnly = exports.isHammerheadAttr = exports.isElementFocusable = exports.isShadowRoot = exports.isShadowUIElement = exports.isDomElement = exports.isContentEditableElement = exports.isTextEditableElementAndEditingAllowed = exports.isTextEditableElement = exports.isTextEditableInput = exports.isWindow = exports.isDocument = exports.isHtmlElement = exports.isBodyElement = exports.isMapElement = exports.isSVGElement = exports.isOptionElement = exports.isCheckboxElement = exports.isColorInputElement = exports.isRadioButtonElement = exports.isSelectElement = exports.isLabelElement = exports.isFormElement = exports.isImgElement = exports.isAnchorElement = exports.isTextAreaElement = exports.isFileInput = exports.isButtonElement = exports.isInputElement = exports.isIframeElement = exports.isRenderedNode = exports.isTextNode = exports.isElementNode = exports.getSelectVisibleChildren = exports.getChildVisibleIndex = exports.getSelectParent = exports.isCrossDomainWindows = exports.getIframeByElement = exports.isElementInIframe = exports.isElementInDocument = exports.find = exports.findDocument = exports.getActiveElement = void 0;
const hammerhead_1 = __importDefault(require("../deps/hammerhead"));
const arrayUtils = __importStar(require("./array"));
const browserUtils = hammerhead_1.default.utils.browser;
const nativeMethods = hammerhead_1.default.nativeMethods;
// NOTE: We have to retrieve styleUtils.get from hammerhead
// to avoid circular dependencies between domUtils and styleUtils
const getElementStyleProperty = hammerhead_1.default.utils.style.get;
exports.getActiveElement = hammerhead_1.default.utils.dom.getActiveElement;
exports.findDocument = hammerhead_1.default.utils.dom.findDocument;
exports.find = hammerhead_1.default.utils.dom.find;
exports.isElementInDocument = hammerhead_1.default.utils.dom.isElementInDocument;
exports.isElementInIframe = hammerhead_1.default.utils.dom.isElementInIframe;
exports.getIframeByElement = hammerhead_1.default.utils.dom.getIframeByElement;
exports.isCrossDomainWindows = hammerhead_1.default.utils.dom.isCrossDomainWindows;
exports.getSelectParent = hammerhead_1.default.utils.dom.getSelectParent;
exports.getChildVisibleIndex = hammerhead_1.default.utils.dom.getChildVisibleIndex;
exports.getSelectVisibleChildren = hammerhead_1.default.utils.dom.getSelectVisibleChildren;
exports.isElementNode = hammerhead_1.default.utils.dom.isElementNode;
exports.isTextNode = hammerhead_1.default.utils.dom.isTextNode;
exports.isRenderedNode = hammerhead_1.default.utils.dom.isRenderedNode;
exports.isIframeElement = hammerhead_1.default.utils.dom.isIframeElement;
exports.isInputElement = hammerhead_1.default.utils.dom.isInputElement;
exports.isButtonElement = hammerhead_1.default.utils.dom.isButtonElement;
exports.isFileInput = hammerhead_1.default.utils.dom.isFileInput;
exports.isTextAreaElement = hammerhead_1.default.utils.dom.isTextAreaElement;
exports.isAnchorElement = hammerhead_1.default.utils.dom.isAnchorElement;
exports.isImgElement = hammerhead_1.default.utils.dom.isImgElement;
exports.isFormElement = hammerhead_1.default.utils.dom.isFormElement;
exports.isLabelElement = hammerhead_1.default.utils.dom.isLabelElement;
exports.isSelectElement = hammerhead_1.default.utils.dom.isSelectElement;
exports.isRadioButtonElement = hammerhead_1.default.utils.dom.isRadioButtonElement;
exports.isColorInputElement = hammerhead_1.default.utils.dom.isColorInputElement;
exports.isCheckboxElement = hammerhead_1.default.utils.dom.isCheckboxElement;
exports.isOptionElement = hammerhead_1.default.utils.dom.isOptionElement;
exports.isSVGElement = hammerhead_1.default.utils.dom.isSVGElement;
exports.isMapElement = hammerhead_1.default.utils.dom.isMapElement;
exports.isBodyElement = hammerhead_1.default.utils.dom.isBodyElement;
exports.isHtmlElement = hammerhead_1.default.utils.dom.isHtmlElement;
exports.isDocument = hammerhead_1.default.utils.dom.isDocument;
exports.isWindow = hammerhead_1.default.utils.dom.isWindow;
exports.isTextEditableInput = hammerhead_1.default.utils.dom.isTextEditableInput;
exports.isTextEditableElement = hammerhead_1.default.utils.dom.isTextEditableElement;
exports.isTextEditableElementAndEditingAllowed = hammerhead_1.default.utils.dom.isTextEditableElementAndEditingAllowed;
exports.isContentEditableElement = hammerhead_1.default.utils.dom.isContentEditableElement;
exports.isDomElement = hammerhead_1.default.utils.dom.isDomElement;
exports.isShadowUIElement = hammerhead_1.default.utils.dom.isShadowUIElement;
exports.isShadowRoot = hammerhead_1.default.utils.dom.isShadowRoot;
exports.isElementFocusable = hammerhead_1.default.utils.dom.isElementFocusable;
exports.isHammerheadAttr = hammerhead_1.default.utils.dom.isHammerheadAttr;
exports.isElementReadOnly = hammerhead_1.default.utils.dom.isElementReadOnly;
exports.getScrollbarSize = hammerhead_1.default.utils.dom.getScrollbarSize;
exports.getMapContainer = hammerhead_1.default.utils.dom.getMapContainer;
exports.getTagName = hammerhead_1.default.utils.dom.getTagName;
exports.closest = hammerhead_1.default.utils.dom.closest;
exports.getParents = hammerhead_1.default.utils.dom.getParents;
exports.findParent = hammerhead_1.default.utils.dom.findParent;
exports.getTopSameDomainWindow = hammerhead_1.default.utils.dom.getTopSameDomainWindow;
exports.getParentExceptShadowRoot = hammerhead_1.default.utils.dom.getParentExceptShadowRoot;
function canFocus(element, parent, tabIndex) {
    let activeElement = null;
    if (parent.nodeType === Node.DOCUMENT_NODE)
        activeElement = nativeMethods.documentActiveElementGetter.call(parent);
    if (element === activeElement)
        return true;
    if (element.disabled)
        return false;
    if (getElementStyleProperty(element, 'display') === 'none' || getElementStyleProperty(element, 'visibility') === 'hidden')
        return false;
    if ((browserUtils.isIE || browserUtils.isAndroid) && exports.isOptionElement(element))
        return false;
    if (tabIndex !== null && tabIndex < 0)
        return false;
    return true;
}
function wrapElement(el) {
    return {
        el: el,
        skip: el.shadowRoot && el.tabIndex < 0,
        children: {},
    };
}
function buildFocusableTree(parent, sort) {
    const node = wrapElement(parent);
    parent = parent.shadowRoot || parent;
    if (exports.isIframeElement(parent))
        parent = nativeMethods.contentDocumentGetter.call(parent);
    if (parent && (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE || parent.nodeType === Node.DOCUMENT_NODE)) {
        const elements = filterFocusableElements(parent);
        for (const el of elements) {
            const key = !sort || el.tabIndex <= 0 ? -1 : el.tabIndex;
            node.children[key] = node.children[key] || [];
            node.children[key].push(buildFocusableTree(el, sort));
        }
    }
    return node;
}
function filterFocusableElements(parent) {
    // NOTE: We don't take into account the case of embedded contentEditable
    // elements and specify the contentEditable attribute for focusable elements
    const allElements = parent.querySelectorAll('*');
    const invisibleElements = getInvisibleElements(allElements);
    const inputElementsRegExp = /^(input|button|select|textarea)$/;
    const focusableElements = [];
    let element = null;
    let tagName = null;
    let tabIndex = null;
    let needPush = false;
    for (let i = 0; i < allElements.length; i++) {
        element = allElements[i];
        tagName = exports.getTagName(element);
        tabIndex = getTabIndexAttributeIntValue(element);
        needPush = false;
        if (!canFocus(element, parent, tabIndex))
            continue;
        if (inputElementsRegExp.test(tagName))
            needPush = true;
        else if (element.shadowRoot)
            needPush = true;
        else if (exports.isIframeElement(element))
            needPush = true;
        else if (exports.isAnchorElement(element) && element.hasAttribute('href'))
            needPush = element.getAttribute('href') !== '' || !browserUtils.isIE || tabIndex !== null;
        const contentEditableAttr = element.getAttribute('contenteditable');
        if (contentEditableAttr === '' || contentEditableAttr === 'true')
            needPush = true;
        if (tabIndex !== null)
            needPush = true;
        if (needPush)
            focusableElements.push(element);
    }
    //NOTE: remove children of invisible elements
    return arrayUtils.filter(focusableElements, el => !containsElement(invisibleElements, el));
}
function flattenFocusableTree(node) {
    const result = [];
    if (!node.skip && node.el.nodeType !== Node.DOCUMENT_NODE && !exports.isIframeElement(node.el))
        result.push(node.el);
    for (const prop in node.children) {
        for (const childNode of node.children[prop])
            result.push(...flattenFocusableTree(childNode));
    }
    return result;
}
function getFocusableElements(doc, sort = false) {
    const root = buildFocusableTree(doc, sort);
    return flattenFocusableTree(root);
}
exports.getFocusableElements = getFocusableElements;
function getInvisibleElements(elements) {
    const invisibleElements = [];
    for (let i = 0; i < elements.length; i++) {
        if (getElementStyleProperty(elements[i], 'display') === 'none')
            invisibleElements.push(elements[i]);
    }
    return invisibleElements;
}
function getTabIndexAttributeIntValue(el) {
    let tabIndex = nativeMethods.getAttribute.call(el, 'tabindex');
    if (tabIndex !== null) {
        tabIndex = parseInt(tabIndex, 10);
        tabIndex = isNaN(tabIndex) ? null : tabIndex;
    }
    return tabIndex;
}
exports.getTabIndexAttributeIntValue = getTabIndexAttributeIntValue;
function containsElement(elements, element) {
    if (elements.contains)
        return elements.contains(element);
    return arrayUtils.some(elements, parent => parent.contains(element));
}
exports.containsElement = containsElement;
function getTextareaIndentInLine(textarea, position) {
    const textareaValue = getTextAreaValue(textarea);
    if (!textareaValue)
        return 0;
    const topPart = textareaValue.substring(0, position);
    const linePosition = topPart.lastIndexOf('\n') === -1 ? 0 : topPart.lastIndexOf('\n') + 1;
    return position - linePosition;
}
exports.getTextareaIndentInLine = getTextareaIndentInLine;
function getTextareaLineNumberByPosition(textarea, position) {
    const textareaValue = getTextAreaValue(textarea);
    const lines = textareaValue.split('\n');
    let topPartLength = 0;
    let line = 0;
    for (let i = 0; topPartLength <= position; i++) {
        if (position <= topPartLength + lines[i].length) {
            line = i;
            break;
        }
        topPartLength += lines[i].length + 1;
    }
    return line;
}
exports.getTextareaLineNumberByPosition = getTextareaLineNumberByPosition;
function getTextareaPositionByLineAndOffset(textarea, line, offset) {
    const textareaValue = getTextAreaValue(textarea);
    const lines = textareaValue.split('\n');
    let lineIndex = 0;
    for (let i = 0; i < line; i++)
        lineIndex += lines[i].length + 1;
    return lineIndex + offset;
}
exports.getTextareaPositionByLineAndOffset = getTextareaPositionByLineAndOffset;
// NOTE: the form is also submitted on enter key press if there is only one input of certain
// types (referred to as types that block implicit submission in the HTML5 standard) on the
// form and this input is focused (http://www.w3.org/TR/html5/forms.html#implicit-submission)
function blocksImplicitSubmission(el) {
    let inputTypeRegExp = null;
    if (browserUtils.isSafari)
        inputTypeRegExp = /^(text|password|color|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i;
    else if (browserUtils.isFirefox)
        inputTypeRegExp = /^(text|password|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i;
    else if (browserUtils.isIE)
        inputTypeRegExp = /^(text|password|color|date|time|datetime|datetime-local|email|file|month|number|search|tel|url|week|image)$/i;
    else
        inputTypeRegExp = /^(text|password|datetime|email|number|search|tel|url|image)$/i;
    return inputTypeRegExp.test(el.type);
}
exports.blocksImplicitSubmission = blocksImplicitSubmission;
function isEditableElement(el, checkEditingAllowed) {
    return checkEditingAllowed ?
        exports.isTextEditableElementAndEditingAllowed(el) || exports.isContentEditableElement(el) :
        exports.isTextEditableElement(el) || exports.isContentEditableElement(el);
}
exports.isEditableElement = isEditableElement;
function isElementContainsNode(parentElement, childNode) {
    if (isTheSameNode(childNode, parentElement))
        return true;
    const childNodes = nativeMethods.nodeChildNodesGetter.call(parentElement);
    const length = getChildNodesLength(childNodes);
    for (let i = 0; i < length; i++) {
        const el = childNodes[i];
        if (!exports.isShadowUIElement(el) && isElementContainsNode(el, childNode))
            return true;
    }
    return false;
}
exports.isElementContainsNode = isElementContainsNode;
function isOptionGroupElement(element) {
    return hammerhead_1.default.utils.dom.instanceToString(element) === '[object HTMLOptGroupElement]';
}
exports.isOptionGroupElement = isOptionGroupElement;
function getElementIndexInParent(parent, child) {
    const children = parent.querySelectorAll(exports.getTagName(child));
    return arrayUtils.indexOf(children, child);
}
exports.getElementIndexInParent = getElementIndexInParent;
function isTheSameNode(node1, node2) {
    //NOTE: Mozilla has not isSameNode method
    if (node1 && node2 && node1.isSameNode)
        return node1.isSameNode(node2);
    return node1 === node2;
}
exports.isTheSameNode = isTheSameNode;
function getElementDescription(el) {
    const attributes = {
        id: 'id',
        name: 'name',
        'class': 'className',
    };
    const res = [];
    res.push('<');
    res.push(exports.getTagName(el));
    for (const attr in attributes) {
        if (attributes.hasOwnProperty(attr)) {
            const val = el[attributes[attr]];
            if (val)
                res.push(' ' + attr + '="' + val + '"');
        }
    }
    res.push('>');
    return res.join('');
}
exports.getElementDescription = getElementDescription;
function getFocusableParent(el) {
    const parents = exports.getParents(el);
    for (let i = 0; i < parents.length; i++) {
        if (exports.isElementFocusable(parents[i]))
            return parents[i];
    }
    return null;
}
exports.getFocusableParent = getFocusableParent;
function remove(el) {
    if (el && el.parentElement)
        el.parentElement.removeChild(el);
}
exports.remove = remove;
function isIFrameWindowInDOM(win) {
    //NOTE: In MS Edge, if an iframe is removed from DOM, the browser throws an exception when accessing window.top
    //and window.frameElement. Fortunately, setTimeout is set to undefined in this case.
    if (!win.setTimeout)
        return false;
    let frameElement = null;
    try {
        //NOTE: This may raise a cross-domain policy error in some browsers.
        frameElement = win.frameElement;
    }
    catch (e) {
        return !!win.top;
    }
    // NOTE: in Firefox and WebKit, frameElement is null for cross-domain iframes even if they are in the DOM.
    // But these browsers don't execute scripts in removed iframes, so we suppose that the iframe is in the DOM.
    if ((browserUtils.isFirefox || browserUtils.isWebKit) && win.top !== win && !frameElement)
        return true;
    return !!(frameElement && nativeMethods.contentDocumentGetter.call(frameElement));
}
exports.isIFrameWindowInDOM = isIFrameWindowInDOM;
function isTopWindow(win) {
    try {
        //NOTE: MS Edge throws an exception when trying to access window.top from an iframe removed from DOM
        return win.top === win;
    }
    catch (e) {
        return false;
    }
}
exports.isTopWindow = isTopWindow;
function findIframeByWindow(iframeWindow) {
    const iframes = [];
    exports.find(document, '*', elem => {
        if (elem.tagName === 'IFRAME')
            iframes.push(elem);
        if (elem.shadowRoot)
            exports.find(elem.shadowRoot, 'iframe', iframe => iframes.push(iframe));
    });
    for (let i = 0; i < iframes.length; i++) {
        if (nativeMethods.contentWindowGetter.call(iframes[i]) === iframeWindow)
            return iframes[i];
    }
    return null;
}
exports.findIframeByWindow = findIframeByWindow;
function isEditableFormElement(element) {
    return exports.isTextEditableElement(element) || exports.isSelectElement(element);
}
exports.isEditableFormElement = isEditableFormElement;
function getCommonAncestor(element1, element2) {
    if (isTheSameNode(element1, element2))
        return element1;
    const el1Parents = [element1].concat(exports.getParents(element1));
    let commonAncestor = element2;
    while (commonAncestor) {
        if (arrayUtils.indexOf(el1Parents, commonAncestor) > -1)
            return commonAncestor;
        commonAncestor = nativeMethods.nodeParentNodeGetter.call(commonAncestor);
    }
    return commonAncestor;
}
exports.getCommonAncestor = getCommonAncestor;
function getChildrenLength(children) {
    return nativeMethods.htmlCollectionLengthGetter.call(children);
}
exports.getChildrenLength = getChildrenLength;
function getChildNodesLength(childNodes) {
    return nativeMethods.nodeListLengthGetter.call(childNodes);
}
exports.getChildNodesLength = getChildNodesLength;
function getInputValue(input) {
    return nativeMethods.inputValueGetter.call(input);
}
exports.getInputValue = getInputValue;
function getTextAreaValue(textArea) {
    return nativeMethods.textAreaValueGetter.call(textArea);
}
exports.getTextAreaValue = getTextAreaValue;
function setInputValue(input, value) {
    return nativeMethods.inputValueSetter.call(input, value);
}
exports.setInputValue = setInputValue;
function setTextAreaValue(textArea, value) {
    return nativeMethods.textAreaValueSetter.call(textArea, value);
}
exports.setTextAreaValue = setTextAreaValue;
function getElementValue(element) {
    if (exports.isInputElement(element))
        return getInputValue(element);
    else if (exports.isTextAreaElement(element))
        return getTextAreaValue(element);
    /*eslint-disable no-restricted-properties*/
    return element.value;
    /*eslint-enable no-restricted-properties*/
}
exports.getElementValue = getElementValue;
function setElementValue(element, value) {
    if (exports.isInputElement(element))
        return setInputValue(element, value);
    else if (exports.isTextAreaElement(element))
        return setTextAreaValue(element, value);
    /*eslint-disable no-restricted-properties*/
    element.value = value;
    /*eslint-enable no-restricted-properties*/
    return value;
}
exports.setElementValue = setElementValue;
function isShadowElement(element) {
    return element && element.getRootNode && exports.findDocument(element) !== element.getRootNode();
}
exports.isShadowElement = isShadowElement;
function contains(element, target) {
    if (!element || !target)
        return false;
    if (element.contains)
        return element.contains(target);
    return !!exports.findParent(target, true, node => node === element);
}
exports.contains = contains;
function isNodeEqual(el1, el2) {
    return el1 === el2;
}
exports.isNodeEqual = isNodeEqual;
function getNodeText(el) {
    return nativeMethods.nodeTextContentGetter.call(el);
}
exports.getNodeText = getNodeText;
function getImgMapName(img) {
    return img.useMap.substring(1);
}
exports.getImgMapName = getImgMapName;
function getDocumentElement(win) {
    return win.document.documentElement;
}
exports.getDocumentElement = getDocumentElement;
function isDocumentElement(el) {
    return el === document.documentElement;
}
exports.isDocumentElement = isDocumentElement;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9tLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NsaWVudC9jb3JlL3V0aWxzL2RvbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsb0VBQTRDO0FBQzVDLG9EQUFzQztBQUV0QyxNQUFNLFlBQVksR0FBSSxvQkFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7QUFDL0MsTUFBTSxhQUFhLEdBQUcsb0JBQVUsQ0FBQyxhQUFhLENBQUM7QUFFL0MsMkRBQTJEO0FBQzNELGlFQUFpRTtBQUNqRSxNQUFNLHVCQUF1QixHQUFHLG9CQUFVLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7QUFFOUMsUUFBQSxnQkFBZ0IsR0FBeUIsb0JBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDO0FBQy9FLFFBQUEsWUFBWSxHQUE2QixvQkFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDO0FBQzNFLFFBQUEsSUFBSSxHQUFxQyxvQkFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQ25FLFFBQUEsbUJBQW1CLEdBQXNCLG9CQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQztBQUNsRixRQUFBLGlCQUFpQixHQUF3QixvQkFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUM7QUFDaEYsUUFBQSxrQkFBa0IsR0FBdUIsb0JBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDO0FBQ2pGLFFBQUEsb0JBQW9CLEdBQXFCLG9CQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQztBQUNuRixRQUFBLGVBQWUsR0FBMEIsb0JBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQztBQUM5RSxRQUFBLG9CQUFvQixH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QUFPLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBUkQsNEJBUUM7QUFFRCxTQUFnQixXQUFXLENBQUUsR0FBRyxFQUFFLEdBQUc7SUFDakMsT0FBTyxHQUFHLEtBQUssR0FBRyxDQUFDO0FBQ3ZCLENBQUM7QUFGRCxrQ0FFQztBQUVELFNBQWdCLFdBQVcsQ0FBRSxFQUFFO0lBQzNCLE9BQU8sYUFBYSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUN4RCxDQUFDO0FBRkQsa0NBRUM7QUFFRCxTQUFnQixhQUFhLENBQUUsR0FBRztJQUM5QixPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLENBQUM7QUFGRCxzQ0FFQztBQUVELFNBQWdCLGtCQUFrQixDQUFFLEdBQUc7SUFDbkMsT0FBTyxHQUFHLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQztBQUN4QyxDQUFDO0FBRkQsZ0RBRUM7QUFFRCxTQUFnQixpQkFBaUIsQ0FBRSxFQUFFO0lBQ2pDLE9BQU8sRUFBRSxLQUFLLFFBQVEsQ0FBQyxlQUFlLENBQUM7QUFDM0MsQ0FBQztBQUZELDhDQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGhhbW1lcmhlYWQgZnJvbSAnLi4vZGVwcy9oYW1tZXJoZWFkJztcbmltcG9ydCAqIGFzIGFycmF5VXRpbHMgZnJvbSAnLi9hcnJheSc7XG5cbmNvbnN0IGJyb3dzZXJVdGlscyAgPSBoYW1tZXJoZWFkLnV0aWxzLmJyb3dzZXI7XG5jb25zdCBuYXRpdmVNZXRob2RzID0gaGFtbWVyaGVhZC5uYXRpdmVNZXRob2RzO1xuXG4vLyBOT1RFOiBXZSBoYXZlIHRvIHJldHJpZXZlIHN0eWxlVXRpbHMuZ2V0IGZyb20gaGFtbWVyaGVhZFxuLy8gdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzIGJldHdlZW4gZG9tVXRpbHMgYW5kIHN0eWxlVXRpbHNcbmNvbnN0IGdldEVsZW1lbnRTdHlsZVByb3BlcnR5ID0gaGFtbWVyaGVhZC51dGlscy5zdHlsZS5nZXQ7XG5cbmV4cG9ydCBjb25zdCBnZXRBY3RpdmVFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmdldEFjdGl2ZUVsZW1lbnQ7XG5leHBvcnQgY29uc3QgZmluZERvY3VtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5maW5kRG9jdW1lbnQ7XG5leHBvcnQgY29uc3QgZmluZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5maW5kO1xuZXhwb3J0IGNvbnN0IGlzRWxlbWVudEluRG9jdW1lbnQgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNFbGVtZW50SW5Eb2N1bWVudDtcbmV4cG9ydCBjb25zdCBpc0VsZW1lbnRJbklmcmFtZSAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzRWxlbWVudEluSWZyYW1lO1xuZXhwb3J0IGNvbnN0IGdldElmcmFtZUJ5RWxlbWVudCAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0SWZyYW1lQnlFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzQ3Jvc3NEb21haW5XaW5kb3dzICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNDcm9zc0RvbWFpbldpbmRvd3M7XG5leHBvcnQgY29uc3QgZ2V0U2VsZWN0UGFyZW50ICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5nZXRTZWxlY3RQYXJlbnQ7XG5leHBvcnQgY29uc3QgZ2V0Q2hpbGRWaXNpYmxlSW5kZXggICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5nZXRDaGlsZFZpc2libGVJbmRleDtcbmV4cG9ydCBjb25zdCBnZXRTZWxlY3RWaXNpYmxlQ2hpbGRyZW4gICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmdldFNlbGVjdFZpc2libGVDaGlsZHJlbjtcbmV4cG9ydCBjb25zdCBpc0VsZW1lbnROb2RlICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzRWxlbWVudE5vZGU7XG5leHBvcnQgY29uc3QgaXNUZXh0Tm9kZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc1RleHROb2RlO1xuZXhwb3J0IGNvbnN0IGlzUmVuZGVyZWROb2RlICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNSZW5kZXJlZE5vZGU7XG5leHBvcnQgY29uc3QgaXNJZnJhbWVFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0lmcmFtZUVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNJbnB1dEVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0lucHV0RWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc0J1dHRvbkVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzQnV0dG9uRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc0ZpbGVJbnB1dCAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzRmlsZUlucHV0O1xuZXhwb3J0IGNvbnN0IGlzVGV4dEFyZWFFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNUZXh0QXJlYUVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNBbmNob3JFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0FuY2hvckVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNJbWdFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0ltZ0VsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNGb3JtRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0Zvcm1FbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzTGFiZWxFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNMYWJlbEVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNTZWxlY3RFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc1NlbGVjdEVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNSYWRpb0J1dHRvbkVsZW1lbnQgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc1JhZGlvQnV0dG9uRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc0NvbG9ySW5wdXRFbGVtZW50ICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzQ29sb3JJbnB1dEVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNDaGVja2JveEVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0NoZWNrYm94RWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc09wdGlvbkVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzT3B0aW9uRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc1NWR0VsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzU1ZHRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc01hcEVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzTWFwRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc0JvZHlFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzQm9keUVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNIdG1sRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0h0bWxFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzRG9jdW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNEb2N1bWVudDtcbmV4cG9ydCBjb25zdCBpc1dpbmRvdyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzV2luZG93O1xuZXhwb3J0IGNvbnN0IGlzVGV4dEVkaXRhYmxlSW5wdXQgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNUZXh0RWRpdGFibGVJbnB1dDtcbmV4cG9ydCBjb25zdCBpc1RleHRFZGl0YWJsZUVsZW1lbnQgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzVGV4dEVkaXRhYmxlRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc1RleHRFZGl0YWJsZUVsZW1lbnRBbmRFZGl0aW5nQWxsb3dlZCA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzVGV4dEVkaXRhYmxlRWxlbWVudEFuZEVkaXRpbmdBbGxvd2VkO1xuZXhwb3J0IGNvbnN0IGlzQ29udGVudEVkaXRhYmxlRWxlbWVudCAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNDb250ZW50RWRpdGFibGVFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzRG9tRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNEb21FbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzU2hhZG93VUlFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNTaGFkb3dVSUVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNTaGFkb3dSb290ICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc1NoYWRvd1Jvb3Q7XG5leHBvcnQgY29uc3QgaXNFbGVtZW50Rm9jdXNhYmxlICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0VsZW1lbnRGb2N1c2FibGU7XG5leHBvcnQgY29uc3QgaXNIYW1tZXJoZWFkQXR0ciAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0hhbW1lcmhlYWRBdHRyO1xuZXhwb3J0IGNvbnN0IGlzRWxlbWVudFJlYWRPbmx5ICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNFbGVtZW50UmVhZE9ubHk7XG5leHBvcnQgY29uc3QgZ2V0U2Nyb2xsYmFyU2l6ZSAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5nZXRTY3JvbGxiYXJTaXplO1xuZXhwb3J0IGNvbnN0IGdldE1hcENvbnRhaW5lciAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0TWFwQ29udGFpbmVyO1xuZXhwb3J0IGNvbnN0IGdldFRhZ05hbWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0VGFnTmFtZTtcbmV4cG9ydCBjb25zdCBjbG9zZXN0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmNsb3Nlc3Q7XG5leHBvcnQgY29uc3QgZ2V0UGFyZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5nZXRQYXJlbnRzO1xuZXhwb3J0IGNvbnN0IGZpbmRQYXJlbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZmluZFBhcmVudDtcbmV4cG9ydCBjb25zdCBnZXRUb3BTYW1lRG9tYWluV2luZG93ICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmdldFRvcFNhbWVEb21haW5XaW5kb3c7XG5leHBvcnQgY29uc3QgZ2V0UGFyZW50RXhjZXB0U2hhZG93Um9vdCAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5nZXRQYXJlbnRFeGNlcHRTaGFkb3dSb290O1xuXG5mdW5jdGlvbiBjYW5Gb2N1cyAoZWxlbWVudCwgcGFyZW50LCB0YWJJbmRleCkge1xuICAgIGxldCBhY3RpdmVFbGVtZW50ID0gbnVsbDtcblxuICAgIGlmIChwYXJlbnQubm9kZVR5cGUgPT09IE5vZGUuRE9DVU1FTlRfTk9ERSlcbiAgICAgICAgYWN0aXZlRWxlbWVudCA9IG5hdGl2ZU1ldGhvZHMuZG9jdW1lbnRBY3RpdmVFbGVtZW50R2V0dGVyLmNhbGwocGFyZW50KTtcblxuICAgIGlmIChlbGVtZW50ID09PSBhY3RpdmVFbGVtZW50KVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIGlmIChlbGVtZW50LmRpc2FibGVkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoZ2V0RWxlbWVudFN0eWxlUHJvcGVydHkoZWxlbWVudCwgJ2Rpc3BsYXknKSA9PT0gJ25vbmUnIHx8IGdldEVsZW1lbnRTdHlsZVByb3BlcnR5KGVsZW1lbnQsICd2aXNpYmlsaXR5JykgPT09ICdoaWRkZW4nKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoKGJyb3dzZXJVdGlscy5pc0lFIHx8IGJyb3dzZXJVdGlscy5pc0FuZHJvaWQpICYmIGlzT3B0aW9uRWxlbWVudChlbGVtZW50KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKHRhYkluZGV4ICE9PSBudWxsICYmIHRhYkluZGV4IDwgMClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHdyYXBFbGVtZW50IChlbCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGVsOiAgICAgICBlbCxcbiAgICAgICAgc2tpcDogICAgIGVsLnNoYWRvd1Jvb3QgJiYgZWwudGFiSW5kZXggPCAwLFxuICAgICAgICBjaGlsZHJlbjoge30sXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRGb2N1c2FibGVUcmVlIChwYXJlbnQsIHNvcnQpIHtcbiAgICBjb25zdCBub2RlID0gd3JhcEVsZW1lbnQocGFyZW50KTtcblxuICAgIHBhcmVudCA9IHBhcmVudC5zaGFkb3dSb290IHx8IHBhcmVudDtcblxuICAgIGlmIChpc0lmcmFtZUVsZW1lbnQocGFyZW50KSlcbiAgICAgICAgcGFyZW50ID0gbmF0aXZlTWV0aG9kcy5jb250ZW50RG9jdW1lbnRHZXR0ZXIuY2FsbChwYXJlbnQpO1xuXG4gICAgaWYgKHBhcmVudCAmJiAocGFyZW50Lm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUgfHwgcGFyZW50Lm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX05PREUpKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZmlsdGVyRm9jdXNhYmxlRWxlbWVudHMocGFyZW50KTtcblxuICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSAhc29ydCB8fCBlbC50YWJJbmRleCA8PSAwID8gLTEgOiBlbC50YWJJbmRleDtcblxuICAgICAgICAgICAgbm9kZS5jaGlsZHJlbltrZXldID0gbm9kZS5jaGlsZHJlbltrZXldIHx8IFtdO1xuXG4gICAgICAgICAgICBub2RlLmNoaWxkcmVuW2tleV0ucHVzaChidWlsZEZvY3VzYWJsZVRyZWUoZWwsIHNvcnQpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBub2RlO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJGb2N1c2FibGVFbGVtZW50cyAocGFyZW50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgdGFrZSBpbnRvIGFjY291bnQgdGhlIGNhc2Ugb2YgZW1iZWRkZWQgY29udGVudEVkaXRhYmxlXG4gICAgLy8gZWxlbWVudHMgYW5kIHNwZWNpZnkgdGhlIGNvbnRlbnRFZGl0YWJsZSBhdHRyaWJ1dGUgZm9yIGZvY3VzYWJsZSBlbGVtZW50c1xuICAgIGNvbnN0IGFsbEVsZW1lbnRzICAgICAgICAgICA9IHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJyk7XG4gICAgY29uc3QgaW52aXNpYmxlRWxlbWVudHMgICAgID0gZ2V0SW52aXNpYmxlRWxlbWVudHMoYWxsRWxlbWVudHMpO1xuICAgIGNvbnN0IGlucHV0RWxlbWVudHNSZWdFeHAgICA9IC9eKGlucHV0fGJ1dHRvbnxzZWxlY3R8dGV4dGFyZWEpJC87XG4gICAgY29uc3QgZm9jdXNhYmxlRWxlbWVudHMgICAgID0gW107XG5cbiAgICBsZXQgZWxlbWVudCAgPSBudWxsO1xuICAgIGxldCB0YWdOYW1lICA9IG51bGw7XG4gICAgbGV0IHRhYkluZGV4ID0gbnVsbDtcblxuICAgIGxldCBuZWVkUHVzaCA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbGVtZW50ICA9IGFsbEVsZW1lbnRzW2ldO1xuICAgICAgICB0YWdOYW1lICA9IGdldFRhZ05hbWUoZWxlbWVudCk7XG4gICAgICAgIHRhYkluZGV4ID0gZ2V0VGFiSW5kZXhBdHRyaWJ1dGVJbnRWYWx1ZShlbGVtZW50KTtcbiAgICAgICAgbmVlZFB1c2ggPSBmYWxzZTtcblxuICAgICAgICBpZiAoIWNhbkZvY3VzKGVsZW1lbnQsIHBhcmVudCwgdGFiSW5kZXgpKVxuICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgaWYgKGlucHV0RWxlbWVudHNSZWdFeHAudGVzdCh0YWdOYW1lKSlcbiAgICAgICAgICAgIG5lZWRQdXNoID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoZWxlbWVudC5zaGFkb3dSb290KVxuICAgICAgICAgICAgbmVlZFB1c2ggPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0lmcmFtZUVsZW1lbnQoZWxlbWVudCkpXG4gICAgICAgICAgICBuZWVkUHVzaCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQW5jaG9yRWxlbWVudChlbGVtZW50KSAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnaHJlZicpKVxuICAgICAgICAgICAgbmVlZFB1c2ggPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpICE9PSAnJyB8fCAhYnJvd3NlclV0aWxzLmlzSUUgfHwgdGFiSW5kZXggIT09IG51bGw7XG5cbiAgICAgICAgY29uc3QgY29udGVudEVkaXRhYmxlQXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKTtcblxuICAgICAgICBpZiAoY29udGVudEVkaXRhYmxlQXR0ciA9PT0gJycgfHwgY29udGVudEVkaXRhYmxlQXR0ciA9PT0gJ3RydWUnKVxuICAgICAgICAgICAgbmVlZFB1c2ggPSB0cnVlO1xuXG4gICAgICAgIGlmICh0YWJJbmRleCAhPT0gbnVsbClcbiAgICAgICAgICAgIG5lZWRQdXNoID0gdHJ1ZTtcblxuICAgICAgICBpZiAobmVlZFB1c2gpXG4gICAgICAgICAgICBmb2N1c2FibGVFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vTk9URTogcmVtb3ZlIGNoaWxkcmVuIG9mIGludmlzaWJsZSBlbGVtZW50c1xuICAgIHJldHVybiBhcnJheVV0aWxzLmZpbHRlcihmb2N1c2FibGVFbGVtZW50cywgZWwgPT4gIWNvbnRhaW5zRWxlbWVudChpbnZpc2libGVFbGVtZW50cywgZWwpKTtcbn1cblxuZnVuY3Rpb24gZmxhdHRlbkZvY3VzYWJsZVRyZWUgKG5vZGUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcblxuICAgIGlmICghbm9kZS5za2lwICYmIG5vZGUuZWwubm9kZVR5cGUgIT09IE5vZGUuRE9DVU1FTlRfTk9ERSAmJiAhaXNJZnJhbWVFbGVtZW50KG5vZGUuZWwpKVxuICAgICAgICByZXN1bHQucHVzaChub2RlLmVsKTtcblxuICAgIGZvciAoY29uc3QgcHJvcCBpbiBub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGROb2RlIG9mIG5vZGUuY2hpbGRyZW5bcHJvcF0pXG4gICAgICAgICAgICByZXN1bHQucHVzaCguLi5mbGF0dGVuRm9jdXNhYmxlVHJlZShjaGlsZE5vZGUpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb2N1c2FibGVFbGVtZW50cyAoZG9jLCBzb3J0ID0gZmFsc2UpIHtcbiAgICBjb25zdCByb290ID0gYnVpbGRGb2N1c2FibGVUcmVlKGRvYywgc29ydCk7XG5cbiAgICByZXR1cm4gZmxhdHRlbkZvY3VzYWJsZVRyZWUocm9vdCk7XG59XG5cbmZ1bmN0aW9uIGdldEludmlzaWJsZUVsZW1lbnRzIChlbGVtZW50cykge1xuICAgIGNvbnN0IGludmlzaWJsZUVsZW1lbnRzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChnZXRFbGVtZW50U3R5bGVQcm9wZXJ0eShlbGVtZW50c1tpXSwgJ2Rpc3BsYXknKSA9PT0gJ25vbmUnKVxuICAgICAgICAgICAgaW52aXNpYmxlRWxlbWVudHMucHVzaChlbGVtZW50c1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGludmlzaWJsZUVsZW1lbnRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFiSW5kZXhBdHRyaWJ1dGVJbnRWYWx1ZSAoZWwpIHtcbiAgICBsZXQgdGFiSW5kZXggPSBuYXRpdmVNZXRob2RzLmdldEF0dHJpYnV0ZS5jYWxsKGVsLCAndGFiaW5kZXgnKTtcblxuICAgIGlmICh0YWJJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICB0YWJJbmRleCA9IHBhcnNlSW50KHRhYkluZGV4LCAxMCk7XG4gICAgICAgIHRhYkluZGV4ID0gaXNOYU4odGFiSW5kZXgpID8gbnVsbCA6IHRhYkluZGV4O1xuICAgIH1cblxuICAgIHJldHVybiB0YWJJbmRleDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zRWxlbWVudCAoZWxlbWVudHMsIGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudHMuY29udGFpbnMpXG4gICAgICAgIHJldHVybiBlbGVtZW50cy5jb250YWlucyhlbGVtZW50KTtcblxuICAgIHJldHVybiBhcnJheVV0aWxzLnNvbWUoZWxlbWVudHMsIHBhcmVudCA9PiBwYXJlbnQuY29udGFpbnMoZWxlbWVudCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dGFyZWFJbmRlbnRJbkxpbmUgKHRleHRhcmVhLCBwb3NpdGlvbikge1xuICAgIGNvbnN0IHRleHRhcmVhVmFsdWUgPSBnZXRUZXh0QXJlYVZhbHVlKHRleHRhcmVhKTtcblxuICAgIGlmICghdGV4dGFyZWFWYWx1ZSlcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICBjb25zdCB0b3BQYXJ0ICAgICAgPSB0ZXh0YXJlYVZhbHVlLnN1YnN0cmluZygwLCBwb3NpdGlvbik7XG4gICAgY29uc3QgbGluZVBvc2l0aW9uID0gdG9wUGFydC5sYXN0SW5kZXhPZignXFxuJykgPT09IC0xID8gMCA6IHRvcFBhcnQubGFzdEluZGV4T2YoJ1xcbicpICsgMTtcblxuICAgIHJldHVybiBwb3NpdGlvbiAtIGxpbmVQb3NpdGlvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHRhcmVhTGluZU51bWJlckJ5UG9zaXRpb24gKHRleHRhcmVhLCBwb3NpdGlvbikge1xuICAgIGNvbnN0IHRleHRhcmVhVmFsdWUgPSBnZXRUZXh0QXJlYVZhbHVlKHRleHRhcmVhKTtcbiAgICBjb25zdCBsaW5lcyAgICAgICAgID0gdGV4dGFyZWFWYWx1ZS5zcGxpdCgnXFxuJyk7XG4gICAgbGV0IHRvcFBhcnRMZW5ndGggICA9IDA7XG4gICAgbGV0IGxpbmUgICAgICAgICAgICA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgdG9wUGFydExlbmd0aCA8PSBwb3NpdGlvbjsgaSsrKSB7XG4gICAgICAgIGlmIChwb3NpdGlvbiA8PSB0b3BQYXJ0TGVuZ3RoICsgbGluZXNbaV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICBsaW5lID0gaTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0b3BQYXJ0TGVuZ3RoICs9IGxpbmVzW2ldLmxlbmd0aCArIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0YXJlYVBvc2l0aW9uQnlMaW5lQW5kT2Zmc2V0ICh0ZXh0YXJlYSwgbGluZSwgb2Zmc2V0KSB7XG4gICAgY29uc3QgdGV4dGFyZWFWYWx1ZSA9IGdldFRleHRBcmVhVmFsdWUodGV4dGFyZWEpO1xuICAgIGNvbnN0IGxpbmVzICAgICAgICAgPSB0ZXh0YXJlYVZhbHVlLnNwbGl0KCdcXG4nKTtcbiAgICBsZXQgbGluZUluZGV4ICAgICAgID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZTsgaSsrKVxuICAgICAgICBsaW5lSW5kZXggKz0gbGluZXNbaV0ubGVuZ3RoICsgMTtcblxuICAgIHJldHVybiBsaW5lSW5kZXggKyBvZmZzZXQ7XG59XG5cbi8vIE5PVEU6IHRoZSBmb3JtIGlzIGFsc28gc3VibWl0dGVkIG9uIGVudGVyIGtleSBwcmVzcyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBpbnB1dCBvZiBjZXJ0YWluXG4vLyB0eXBlcyAocmVmZXJyZWQgdG8gYXMgdHlwZXMgdGhhdCBibG9jayBpbXBsaWNpdCBzdWJtaXNzaW9uIGluIHRoZSBIVE1MNSBzdGFuZGFyZCkgb24gdGhlXG4vLyBmb3JtIGFuZCB0aGlzIGlucHV0IGlzIGZvY3VzZWQgKGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjaW1wbGljaXQtc3VibWlzc2lvbilcbmV4cG9ydCBmdW5jdGlvbiBibG9ja3NJbXBsaWNpdFN1Ym1pc3Npb24gKGVsKSB7XG4gICAgbGV0IGlucHV0VHlwZVJlZ0V4cCA9IG51bGw7XG5cbiAgICBpZiAoYnJvd3NlclV0aWxzLmlzU2FmYXJpKVxuICAgICAgICBpbnB1dFR5cGVSZWdFeHAgPSAvXih0ZXh0fHBhc3N3b3JkfGNvbG9yfGRhdGV8dGltZXxkYXRldGltZXxkYXRldGltZS1sb2NhbHxlbWFpbHxtb250aHxudW1iZXJ8c2VhcmNofHRlbHx1cmx8d2Vla3xpbWFnZSkkL2k7XG4gICAgZWxzZSBpZiAoYnJvd3NlclV0aWxzLmlzRmlyZWZveClcbiAgICAgICAgaW5wdXRUeXBlUmVnRXhwID0gL14odGV4dHxwYXNzd29yZHxkYXRlfHRpbWV8ZGF0ZXRpbWV8ZGF0ZXRpbWUtbG9jYWx8ZW1haWx8bW9udGh8bnVtYmVyfHNlYXJjaHx0ZWx8dXJsfHdlZWt8aW1hZ2UpJC9pO1xuICAgIGVsc2UgaWYgKGJyb3dzZXJVdGlscy5pc0lFKVxuICAgICAgICBpbnB1dFR5cGVSZWdFeHAgPSAvXih0ZXh0fHBhc3N3b3JkfGNvbG9yfGRhdGV8dGltZXxkYXRldGltZXxkYXRldGltZS1sb2NhbHxlbWFpbHxmaWxlfG1vbnRofG51bWJlcnxzZWFyY2h8dGVsfHVybHx3ZWVrfGltYWdlKSQvaTtcbiAgICBlbHNlXG4gICAgICAgIGlucHV0VHlwZVJlZ0V4cCA9IC9eKHRleHR8cGFzc3dvcmR8ZGF0ZXRpbWV8ZW1haWx8bnVtYmVyfHNlYXJjaHx0ZWx8dXJsfGltYWdlKSQvaTtcblxuICAgIHJldHVybiBpbnB1dFR5cGVSZWdFeHAudGVzdChlbC50eXBlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRWRpdGFibGVFbGVtZW50IChlbCwgY2hlY2tFZGl0aW5nQWxsb3dlZCkge1xuICAgIHJldHVybiBjaGVja0VkaXRpbmdBbGxvd2VkID9cbiAgICAgICAgaXNUZXh0RWRpdGFibGVFbGVtZW50QW5kRWRpdGluZ0FsbG93ZWQoZWwpIHx8IGlzQ29udGVudEVkaXRhYmxlRWxlbWVudChlbCkgOlxuICAgICAgICBpc1RleHRFZGl0YWJsZUVsZW1lbnQoZWwpIHx8IGlzQ29udGVudEVkaXRhYmxlRWxlbWVudChlbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VsZW1lbnRDb250YWluc05vZGUgKHBhcmVudEVsZW1lbnQsIGNoaWxkTm9kZSkge1xuICAgIGlmIChpc1RoZVNhbWVOb2RlKGNoaWxkTm9kZSwgcGFyZW50RWxlbWVudCkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgY2hpbGROb2RlcyA9IG5hdGl2ZU1ldGhvZHMubm9kZUNoaWxkTm9kZXNHZXR0ZXIuY2FsbChwYXJlbnRFbGVtZW50KTtcbiAgICBjb25zdCBsZW5ndGggICAgID0gZ2V0Q2hpbGROb2Rlc0xlbmd0aChjaGlsZE5vZGVzKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZWwgPSBjaGlsZE5vZGVzW2ldO1xuXG4gICAgICAgIGlmICghaXNTaGFkb3dVSUVsZW1lbnQoZWwpICYmIGlzRWxlbWVudENvbnRhaW5zTm9kZShlbCwgY2hpbGROb2RlKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT3B0aW9uR3JvdXBFbGVtZW50IChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGhhbW1lcmhlYWQudXRpbHMuZG9tLmluc3RhbmNlVG9TdHJpbmcoZWxlbWVudCkgPT09ICdbb2JqZWN0IEhUTUxPcHRHcm91cEVsZW1lbnRdJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRJbmRleEluUGFyZW50IChwYXJlbnQsIGNoaWxkKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChnZXRUYWdOYW1lKGNoaWxkKSk7XG5cbiAgICByZXR1cm4gYXJyYXlVdGlscy5pbmRleE9mKGNoaWxkcmVuLCBjaGlsZCk7XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVGhlU2FtZU5vZGUgKG5vZGUxLCBub2RlMikge1xuICAgIC8vTk9URTogTW96aWxsYSBoYXMgbm90IGlzU2FtZU5vZGUgbWV0aG9kXG4gICAgaWYgKG5vZGUxICYmIG5vZGUyICYmIG5vZGUxLmlzU2FtZU5vZGUpXG4gICAgICAgIHJldHVybiBub2RlMS5pc1NhbWVOb2RlKG5vZGUyKTtcblxuICAgIHJldHVybiBub2RlMSA9PT0gbm9kZTI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50RGVzY3JpcHRpb24gKGVsKSB7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICAgICAgaWQ6ICAgICAgJ2lkJyxcbiAgICAgICAgbmFtZTogICAgJ25hbWUnLFxuICAgICAgICAnY2xhc3MnOiAnY2xhc3NOYW1lJyxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzID0gW107XG5cbiAgICByZXMucHVzaCgnPCcpO1xuICAgIHJlcy5wdXNoKGdldFRhZ05hbWUoZWwpKTtcblxuICAgIGZvciAoY29uc3QgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHIpKSB7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSBlbFthdHRyaWJ1dGVzW2F0dHJdXTtcblxuICAgICAgICAgICAgaWYgKHZhbClcbiAgICAgICAgICAgICAgICByZXMucHVzaCgnICcgKyBhdHRyICsgJz1cIicgKyB2YWwgKyAnXCInKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlcy5wdXNoKCc+Jyk7XG5cbiAgICByZXR1cm4gcmVzLmpvaW4oJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9jdXNhYmxlUGFyZW50IChlbCkge1xuICAgIGNvbnN0IHBhcmVudHMgPSBnZXRQYXJlbnRzKGVsKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXNFbGVtZW50Rm9jdXNhYmxlKHBhcmVudHNbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUgKGVsKSB7XG4gICAgaWYgKGVsICYmIGVsLnBhcmVudEVsZW1lbnQpXG4gICAgICAgIGVsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNJRnJhbWVXaW5kb3dJbkRPTSAod2luKSB7XG4gICAgLy9OT1RFOiBJbiBNUyBFZGdlLCBpZiBhbiBpZnJhbWUgaXMgcmVtb3ZlZCBmcm9tIERPTSwgdGhlIGJyb3dzZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aGVuIGFjY2Vzc2luZyB3aW5kb3cudG9wXG4gICAgLy9hbmQgd2luZG93LmZyYW1lRWxlbWVudC4gRm9ydHVuYXRlbHksIHNldFRpbWVvdXQgaXMgc2V0IHRvIHVuZGVmaW5lZCBpbiB0aGlzIGNhc2UuXG4gICAgaWYgKCF3aW4uc2V0VGltZW91dClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgbGV0IGZyYW1lRWxlbWVudCA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgICAvL05PVEU6IFRoaXMgbWF5IHJhaXNlIGEgY3Jvc3MtZG9tYWluIHBvbGljeSBlcnJvciBpbiBzb21lIGJyb3dzZXJzLlxuICAgICAgICBmcmFtZUVsZW1lbnQgPSB3aW4uZnJhbWVFbGVtZW50O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gISF3aW4udG9wO1xuICAgIH1cblxuICAgIC8vIE5PVEU6IGluIEZpcmVmb3ggYW5kIFdlYktpdCwgZnJhbWVFbGVtZW50IGlzIG51bGwgZm9yIGNyb3NzLWRvbWFpbiBpZnJhbWVzIGV2ZW4gaWYgdGhleSBhcmUgaW4gdGhlIERPTS5cbiAgICAvLyBCdXQgdGhlc2UgYnJvd3NlcnMgZG9uJ3QgZXhlY3V0ZSBzY3JpcHRzIGluIHJlbW92ZWQgaWZyYW1lcywgc28gd2Ugc3VwcG9zZSB0aGF0IHRoZSBpZnJhbWUgaXMgaW4gdGhlIERPTS5cbiAgICBpZiAoKGJyb3dzZXJVdGlscy5pc0ZpcmVmb3ggfHwgYnJvd3NlclV0aWxzLmlzV2ViS2l0KSAmJiB3aW4udG9wICE9PSB3aW4gJiYgIWZyYW1lRWxlbWVudClcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gISEoZnJhbWVFbGVtZW50ICYmIG5hdGl2ZU1ldGhvZHMuY29udGVudERvY3VtZW50R2V0dGVyLmNhbGwoZnJhbWVFbGVtZW50KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RvcFdpbmRvdyAod2luKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy9OT1RFOiBNUyBFZGdlIHRocm93cyBhbiBleGNlcHRpb24gd2hlbiB0cnlpbmcgdG8gYWNjZXNzIHdpbmRvdy50b3AgZnJvbSBhbiBpZnJhbWUgcmVtb3ZlZCBmcm9tIERPTVxuICAgICAgICByZXR1cm4gd2luLnRvcCA9PT0gd2luO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZElmcmFtZUJ5V2luZG93IChpZnJhbWVXaW5kb3cpIHtcbiAgICBjb25zdCBpZnJhbWVzID0gW107XG5cbiAgICBmaW5kKGRvY3VtZW50LCAnKicsIGVsZW0gPT4ge1xuICAgICAgICBpZiAoZWxlbS50YWdOYW1lID09PSAnSUZSQU1FJylcbiAgICAgICAgICAgIGlmcmFtZXMucHVzaChlbGVtKTtcblxuICAgICAgICBpZiAoZWxlbS5zaGFkb3dSb290KVxuICAgICAgICAgICAgZmluZChlbGVtLnNoYWRvd1Jvb3QsICdpZnJhbWUnLCBpZnJhbWUgPT4gaWZyYW1lcy5wdXNoKGlmcmFtZSkpO1xuICAgIH0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChuYXRpdmVNZXRob2RzLmNvbnRlbnRXaW5kb3dHZXR0ZXIuY2FsbChpZnJhbWVzW2ldKSA9PT0gaWZyYW1lV2luZG93KVxuICAgICAgICAgICAgcmV0dXJuIGlmcmFtZXNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VkaXRhYmxlRm9ybUVsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gaXNUZXh0RWRpdGFibGVFbGVtZW50KGVsZW1lbnQpIHx8IGlzU2VsZWN0RWxlbWVudChlbGVtZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbW1vbkFuY2VzdG9yIChlbGVtZW50MSwgZWxlbWVudDIpIHtcbiAgICBpZiAoaXNUaGVTYW1lTm9kZShlbGVtZW50MSwgZWxlbWVudDIpKVxuICAgICAgICByZXR1cm4gZWxlbWVudDE7XG5cbiAgICBjb25zdCBlbDFQYXJlbnRzICAgPSBbZWxlbWVudDFdLmNvbmNhdChnZXRQYXJlbnRzKGVsZW1lbnQxKSk7XG4gICAgbGV0IGNvbW1vbkFuY2VzdG9yID0gZWxlbWVudDI7XG5cbiAgICB3aGlsZSAoY29tbW9uQW5jZXN0b3IpIHtcbiAgICAgICAgaWYgKGFycmF5VXRpbHMuaW5kZXhPZihlbDFQYXJlbnRzLCBjb21tb25BbmNlc3RvcikgPiAtMSlcbiAgICAgICAgICAgIHJldHVybiBjb21tb25BbmNlc3RvcjtcblxuICAgICAgICBjb21tb25BbmNlc3RvciA9IG5hdGl2ZU1ldGhvZHMubm9kZVBhcmVudE5vZGVHZXR0ZXIuY2FsbChjb21tb25BbmNlc3Rvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbW1vbkFuY2VzdG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hpbGRyZW5MZW5ndGggKGNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIG5hdGl2ZU1ldGhvZHMuaHRtbENvbGxlY3Rpb25MZW5ndGhHZXR0ZXIuY2FsbChjaGlsZHJlbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGlsZE5vZGVzTGVuZ3RoIChjaGlsZE5vZGVzKSB7XG4gICAgcmV0dXJuIG5hdGl2ZU1ldGhvZHMubm9kZUxpc3RMZW5ndGhHZXR0ZXIuY2FsbChjaGlsZE5vZGVzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElucHV0VmFsdWUgKGlucHV0KSB7XG4gICAgcmV0dXJuIG5hdGl2ZU1ldGhvZHMuaW5wdXRWYWx1ZUdldHRlci5jYWxsKGlucHV0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHRBcmVhVmFsdWUgKHRleHRBcmVhKSB7XG4gICAgcmV0dXJuIG5hdGl2ZU1ldGhvZHMudGV4dEFyZWFWYWx1ZUdldHRlci5jYWxsKHRleHRBcmVhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldElucHV0VmFsdWUgKGlucHV0LCB2YWx1ZSkge1xuICAgIHJldHVybiBuYXRpdmVNZXRob2RzLmlucHV0VmFsdWVTZXR0ZXIuY2FsbChpbnB1dCwgdmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VGV4dEFyZWFWYWx1ZSAodGV4dEFyZWEsIHZhbHVlKSB7XG4gICAgcmV0dXJuIG5hdGl2ZU1ldGhvZHMudGV4dEFyZWFWYWx1ZVNldHRlci5jYWxsKHRleHRBcmVhLCB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50VmFsdWUgKGVsZW1lbnQpIHtcbiAgICBpZiAoaXNJbnB1dEVsZW1lbnQoZWxlbWVudCkpXG4gICAgICAgIHJldHVybiBnZXRJbnB1dFZhbHVlKGVsZW1lbnQpO1xuICAgIGVsc2UgaWYgKGlzVGV4dEFyZWFFbGVtZW50KGVsZW1lbnQpKVxuICAgICAgICByZXR1cm4gZ2V0VGV4dEFyZWFWYWx1ZShlbGVtZW50KTtcblxuICAgIC8qZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzKi9cbiAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcbiAgICAvKmVzbGludC1lbmFibGUgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzKi9cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEVsZW1lbnRWYWx1ZSAoZWxlbWVudCwgdmFsdWUpIHtcbiAgICBpZiAoaXNJbnB1dEVsZW1lbnQoZWxlbWVudCkpXG4gICAgICAgIHJldHVybiBzZXRJbnB1dFZhbHVlKGVsZW1lbnQsIHZhbHVlKTtcbiAgICBlbHNlIGlmIChpc1RleHRBcmVhRWxlbWVudChlbGVtZW50KSlcbiAgICAgICAgcmV0dXJuIHNldFRleHRBcmVhVmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuXG4gICAgLyplc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLXByb3BlcnRpZXMqL1xuICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgICAvKmVzbGludC1lbmFibGUgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzKi9cblxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU2hhZG93RWxlbWVudCAoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50ICYmIGVsZW1lbnQuZ2V0Um9vdE5vZGUgJiYgZmluZERvY3VtZW50KGVsZW1lbnQpICE9PSBlbGVtZW50LmdldFJvb3ROb2RlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250YWlucyAoZWxlbWVudCwgdGFyZ2V0KSB7XG4gICAgaWYgKCFlbGVtZW50IHx8ICF0YXJnZXQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChlbGVtZW50LmNvbnRhaW5zKVxuICAgICAgICByZXR1cm4gZWxlbWVudC5jb250YWlucyh0YXJnZXQpO1xuXG4gICAgcmV0dXJuICEhZmluZFBhcmVudCh0YXJnZXQsIHRydWUsIG5vZGUgPT4gbm9kZSA9PT0gZWxlbWVudCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05vZGVFcXVhbCAoZWwxLCBlbDIpIHtcbiAgICByZXR1cm4gZWwxID09PSBlbDI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROb2RlVGV4dCAoZWwpIHtcbiAgICByZXR1cm4gbmF0aXZlTWV0aG9kcy5ub2RlVGV4dENvbnRlbnRHZXR0ZXIuY2FsbChlbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbWdNYXBOYW1lIChpbWcpIHtcbiAgICByZXR1cm4gaW1nLnVzZU1hcC5zdWJzdHJpbmcoMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREb2N1bWVudEVsZW1lbnQgKHdpbikge1xuICAgIHJldHVybiB3aW4uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEb2N1bWVudEVsZW1lbnQgKGVsKSB7XG4gICAgcmV0dXJuIGVsID09PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG59XG5cbiJdfQ==